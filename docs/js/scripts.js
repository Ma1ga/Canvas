const size30x30=document.getElementById("size30x30"),size30x90=document.getElementById("size30x90"),size90x120=document.getElementById("size90x120"),size90x150=document.getElementById("size90x150"),someBuy=document.querySelector(".total-price"),extraOptions=document.querySelectorAll(".extraInput"),customSizeX=document.getElementById("width-custom-size"),customSizeY=document.getElementById("height-custom-size"),customSizeButton=document.getElementById("button-custom-size"),canvasWrapper=document.querySelector(".canvas-wrapper"),customSizeWrapper=document.querySelector(".custom-size-wrapper"),buttonToggle=document.getElementById("toggle-custom"),orderCallButton=document.getElementById("order-call"),callPopup=document.querySelector(".call-popup"),closePopupButton=document.querySelector(".close-popup");document.getElementById("buy-button").addEventListener("click",(function(){const e={size:document.querySelector('input[name="size"]:checked')?.value||"Custom size",price:document.querySelector(".total-price").textContent};fetch("index.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((e=>e.text())).then((e=>{console.log("Сообщение отправлено:",e)})).catch((e=>{console.error("Ошибка:",e)}))}));let basePrice=0,extraPrice=0;function updateCanvasSize(e,t){canvasWrapper.style.width=3*e+"px",canvasWrapper.style.height=3*t+"px"}function checkSize(){size30x30.checked?(basePrice=50,updateCanvasSize(30,30)):size30x90.checked?(basePrice=100,updateCanvasSize(30,90)):size90x120.checked?(basePrice=200,updateCanvasSize(90,120)):size90x150.checked&&(basePrice=345,updateCanvasSize(90,150)),updateTotalPrice()}function checkCustomSize(){const e=parseInt(customSizeX.value),t=parseInt(customSizeY.value);e&&t?e<30||e>90||t<30||t>150?alert("Размер должен быть в пределах от 30 до 90 по ширине и от 30 до 150 по высоте"):(basePrice=30===e&&30===t?50:30===e&&90===t?100:90===e&&120===t?200:90===e&&150===t?345:e*t*.04,updateCanvasSize(e,t),updateTotalPrice()):alert("Введите корректные размеры")}function showCustom(){buttonToggle.checked?customSizeWrapper.style.display="block":customSizeWrapper.style.display="none"}function toggleCustomSize(){customSizeWrapper.style.display=buttonToggle.checked?"block":"none"}function hideCustomSizeOnStandardSelect(){buttonToggle.checked||(customSizeWrapper.style.display="none")}function showPopup(){callPopup.style.display="block"}function hidePopup(){callPopup.style.display="none"}function updateExtraPrice(){extraPrice=0,extraOptions.forEach((e=>{e.checked&&(extraPrice+=parseInt(e.value))}))}function updateTotalPrice(){updateExtraPrice(),someBuy.innerHTML=basePrice+extraPrice+" грн"}buttonToggle.addEventListener("change",showCustom),document.querySelectorAll('input[name="size"]').forEach((e=>{e.addEventListener("change",hideCustomSizeOnStandardSelect)})),buttonToggle.addEventListener("change",toggleCustomSize),callPopup.addEventListener("click",(e=>{e.target===callPopup&&hidePopup()})),size30x30.onchange=checkSize,size30x90.onchange=checkSize,size90x120.onchange=checkSize,size90x150.onchange=checkSize,customSizeButton.onclick=checkCustomSize,orderCallButton.addEventListener("click",showPopup),closePopupButton.addEventListener("click",hidePopup),extraOptions.forEach((e=>{e.onchange=updateTotalPrice}));